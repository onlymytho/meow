<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="initial-scale=1, width=device-width"/>
        <title>meow</title>
        <style media="screen" >
            * {
                font-family: 'Helvetica Neue', arial, serif;
                color: #444444;
            }
            body {
                margin: 0;
            }
            .meow_paw_pop {
                position: fixed;
                bottom: 0px;
                left: 4px;
                z-index: 101;
            }
            .header {
                margin: 0 auto;
                margin-top: 80px;
            }
            .header .hello {
                margin: 0 auto;
                text-align: center;
            }
            .header .hello p {
                cursor: default;
            }
            .header .hello p, input {
                font-size: 72px;
                text-align: center;
                font-weight: bold;
                display: inline-block;
                margin-bottom: 28px;
            }
            .header .hello input {
                border: none;
                width: 400px;
                max-width: 700px;
                outline: none;
            }
            .header .hello input::placeholder{
                color: #dfdfdf;
            }
            .header .meow {
                margin: 0 auto;
                text-align: center;
                margin-bottom: 48px;
            }
            .header .meow .meow_div {
                position: relative;
            }
            .header .meow .meow_div button {
                position: relative;
                width: 196px;
                height: 56px;
                border-radius: 100px;
                border: 2px solid #D18FFF;
                font-size: 24px;
                font-weight: bold;
                color: #D18FFF;
                margin: 0 auto;
                outline: none;
                cursor: pointer;
                transition: all ease 0.2s;
                overflow: hidden;
                padding-left: 36px;
            }
            .header .meow .meow_div button:hover {
                background: #D18FFF;
                color: white;
            }
            .header .meow .meow_div button svg {
                position: absolute;
                left: 28px;
                bottom: -2px;
            }
            .header .meow .meow_div button svg #Bitmap {
                transition: all ease 0.2s;
            }
            .header .meow .meow_div button:hover svg #Bitmap{
                stroke: white;
            }
            .header .meow p {
                font-weight: bold;
                font-size: 22px;
                margin: 28px;
            }
            .header .meow span {
                color: #D18fff;
            }


            .images {
                width: 964px;
                margin: 0 auto;
            }
            .images .image {
                width: 300px;
                height: 300px;
                position: relative;
                overflow: hidden;
                display: inline-block;
                margin-right: 32px;
                margin-bottom: 32px;
                vertical-align: top;
            }
            .images .image:nth-child(3n) {
                margin-right: 0;
            }
            .images .image img {
                width: 100%;
                height: 100%;
                overflow: hidden;
                position: absolute;
                top: -9999px;
                bottom: -9999px;
                left: -9999px;
                right: -9999px;
                margin: auto;
                cursor: pointer;
            }


            .more {
                text-align: center;
            }
            .more button {
                padding: 14px 28px;
                text-align: center;
                border-radius: 100px;
                border: 2px solid #D18FFF;
                font-size: 24px;
                font-weight: bold;
                color: #D18FFF;
                margin: 0 auto;
                outline: none;
                cursor: pointer;
                transition: all ease 0.2s;
                overflow: hidden;
                margin-bottom: 80px;
            }
            .more button:hover {
                background: #D18FFF;
                color: white;
            }


            .viewer {
                position: fixed;
                display: none;
                text-align: center;
                z-index: 100;
                top:0;
                bottom:0;
                left:0;
                right:0;
            }
            .viewer.on {
                display: block;
            }
            .viewer .bg_layer {
                width: 100vw;
                height: 100vh;
                background-color: rgba(0, 0, 0, 0.9);
                cursor: zoom-out;
            }
            .viewer .content {
                position: fixed;
                text-align: center;
                top: 50%;
                left: 50%;
                transform: translate(-50%, -50%);
            }
            .viewer .viewer_item {
                display: inline-block;
                vertical-align: top;
            }
            .viewer .viewer_item#image_div {
                width: 500px;
                height: 500px;
            }
            .viewer .viewer_item#image_div img {
                width: 100%;
                height: 100%;
            }

            .viewer .viewer_item#prev button,
            .viewer .viewer_item#next button {
                height: 500px;
                width: 40px;
                vertical-align: top;
                background: rgba(0, 0, 0, 0.35);
                border: none;
                transition: all ease 0.2s;
                cursor: pointer;
                outline: none;
            }
            .viewer .viewer_item#prev button:hover,
            .viewer .viewer_item#next button:hover {
                background: rgba(0, 0, 0, 0.75);
            }
            @media (max-width: 1024px) {
                .header .hello p, input {
                    font-size: 4.5em;
                }
                .images {
                    width: 100%;
                    margin: 0 auto;
                }
                .images .image {
                    width: 32vw;
                    height: 32vw;
                    position: relative;
                    overflow: hidden;
                    display: inline-block;
                    margin-right: 1vw;
                    margin-bottom: 1vw;
                }
                .more {
                    margin-top: 4vw;
                }
                .viewer .content .bg_layer {
                    background-color: rgba(0, 0, 0, 0.4)
                }
                .viewer .content .viewer_item{
                    display: block;
                }
                .viewer .viewer_item#image_div {
                    width: 100vw;
                    height: 100vw;
                }
                .viewer .viewer_item#prev button,
                .viewer .viewer_item#next button {
                    width: 100vw;
                    height: 15vw;
                    background: rgba(0, 0, 0, 0.5);
                }
            }

        </style>
        <script>
          var getJSON = function(url, callback) {
              var xhr = new XMLHttpRequest();
              xhr.open('GET', url, true);
              // xhr.setRequestHeader('Access-Control-Allow-Origin', '*');
              // xhr.setRequestHeader('"Access-Control-Allow-Methods', 'POST, GET, OPTIONS, DELETE')
              xhr.responseType = 'json';
              xhr.onload = function() {
                var status = xhr.status;
                if (status == 200) {
                  callback(null, xhr.response);
                } else {
                  callback(status);
                }
              };
              xhr.send();
          };

          function numberWithCommas(x) {
              return x.toString().replace(/\B(?=(\d{3})+(?!\d))/g, ",");
          }

        </script>
    </head>
    <body>
        <div class="meow_paw_pop">
            <?xml version="1.0" encoding="UTF-8"?>
            <svg width="30px" height="39px" viewBox="0 0 30 39" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
                <!-- Generator: Sketch 48.2 (47327) - http://www.bohemiancoding.com/sketch -->
                <title>meow</title>
                <desc>Created with Sketch.</desc>
                <defs></defs>
                <g id="Artboard" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd" transform="translate(-649.000000, -351.000000)">
                    <g id="Bitmap" transform="translate(622.000000, 334.000000)" stroke="#D18FFF" stroke-width="2">
                        <g id="Group-2" transform="translate(28.000000, 18.000000)">
                            <path d="M3.5012751,37.1505056 L3.5012751,29.2288461 C1.52759919,22.0834786 0.546490818,17.2639008 0.557950002,14.7701127 C0.575138778,11.0294306 0.854556554,9.82075635 1.44205975,9.44907435 C2.02956294,9.07739235 3.5012751,7.50188937 3.5012751,6.28128405 C3.5012751,5.06067874 3.70167601,4.84794236 4.09924229,4.2550307 C4.49680856,3.66211904 4.66889854,2.62715251 5.37748055,1.96669907 C6.08606256,1.30624564 8.28660319,0.0488102071 9.69211234,0.0488102071 C11.0976215,0.0488102071 12.8680999,1.96669907 13.3397912,1.96669907 C13.8114825,1.96669907 15.1747055,0.0488102071 17.1223828,0.0488102071 C19.0700601,0.0488102071 20.8068103,0.319467656 22.05425,1.96669907 C22.8858765,3.06485335 23.4985214,4.50304835 23.8921848,6.28128405 C25.283263,6.86569984 26.1690895,7.63144484 26.5496643,8.57851906 C27.1205265,9.9991304 27.1205265,13.2082493 27.1205265,14.7701127 C27.1205265,16.3319761 26.6407808,22.0788574 25.6123226,23.8478255 C24.9266838,25.0271377 24.3533045,26.8208112 23.8921848,29.2288461 L23.8921848,36.9286614 L3.5012751,37.1505056 Z" id="Path-4"></path>
                            <path d="M5.5,18 C6.96805436,17.9450124 7.81907646,16.0613151 7.81907646,14.1283184 C7.81907646,12.1953218 6.88071187,11 5.5,11 C4.11928813,11 3,12.5670034 3,14.5 C3,15.2322763 3.58321231,15.9313331 4.07434436,16.6124224 C4.6047608,17.3479903 5.06116989,18.036893 5.5,18 Z" id="Oval"></path>
                            <path d="M22.5,17 C23.9680544,16.9450124 24.8190765,15.0613151 24.8190765,13.1283184 C24.8190765,11.1953218 23.8807119,10 22.5,10 C21.1192881,10 20,11.5670034 20,13.5 C20,14.2322763 20.5832123,14.9313331 21.0743444,15.6124224 C21.6047608,16.3479903 22.0611699,17.036893 22.5,17 Z" id="Oval" transform="translate(22.409538, 13.500709) scale(-1, 1) translate(-22.409538, -13.500709) "></path>
                            <ellipse id="Oval-2" cx="10" cy="6.5" rx="2" ry="3.5"></ellipse>
                            <path d="M17.1328385,8.9353728 C17.9606035,8.77796535 19.2220646,7.90983944 19.4778058,6.5 C19.733547,5.09016056 19.1045695,3 18,3 C16.8954305,3 15.3767731,4.2556346 15.3767731,6.18863122 C15.3767731,8.12162784 16.3050735,9.09278024 17.1328385,8.9353728 Z" id="Oval-2-Copy"></path>
                            <path d="M13.7525723,22.3970899 C16.1195722,22.3970899 18.1499064,20.7416569 18.1068613,19.6292174 C18.0638162,18.516778 17.2700314,15.4511969 16.6000421,14.7526157 C15.9300529,14.0540345 15.0787944,12.1910712 14.0485976,12.1910712 C13.0184008,12.1910712 10.5612226,15.3665496 10.1579453,17.2940806 C9.75466793,19.2216115 9.83667006,21.2644505 10.5612226,21.6891302 C11.2857751,22.1138098 11.3855724,22.3970899 13.7525723,22.3970899 Z" id="Path-5"></path>
                        </g>
                    </g>
                </g>
            </svg>
        </div>
        <div class="viewer" id="viewer">
            <a onclick="close_viewer()"><div class="bg_layer"></div> </a>
            <div class="content">
                <div class="viewer_item" id="prev">
                    <button type="button" name="button" onclick="prev_image()"></button>
                </div>
                <div class="viewer_item" id="image_div">
                    <img id="viewer_image" src="" alt="Cutty">
                </div>
                <div class="viewer_item" id="next">
                    <button type="button" name="button" onclick="next_image()"></button>
                </div>
            </div>
        </div>

        <div class="header">
            <div class="hello">
                <p>Meow~, Sanghyuk</p>
                <!-- <input type="text" name="name" placeholder="Your Name" value=""> -->
            </div>
            <div class="meow">
                <div class="meow_div">
                    <button id="meow_button" type="button" name="meow" onclick="call_giphy()">
                        <script type="text/javascript">
                            function hover_meow() {
                                document.getElementById('#Bitmap').classList.toggle('hover')
                            }
                            document.getElementById('meow_button').addEventListener("hover", hover_meow, true)
                        </script>
                        <?xml version="1.0" encoding="UTF-8"?>
                        <svg width="30px" height="39px" viewBox="0 0 30 39" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
                            <!-- Generator: Sketch 48.2 (47327) - http://www.bohemiancoding.com/sketch -->
                            <title>meow</title>
                            <desc>Created with Sketch.</desc>
                            <defs></defs>
                            <g id="Artboard" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd" transform="translate(-649.000000, -351.000000)">
                                <g id="Bitmap" transform="translate(622.000000, 334.000000)" stroke="#D18FFF" stroke-width="2">
                                    <g id="Group-2" transform="translate(28.000000, 18.000000)">
                                        <path d="M3.5012751,37.1505056 L3.5012751,29.2288461 C1.52759919,22.0834786 0.546490818,17.2639008 0.557950002,14.7701127 C0.575138778,11.0294306 0.854556554,9.82075635 1.44205975,9.44907435 C2.02956294,9.07739235 3.5012751,7.50188937 3.5012751,6.28128405 C3.5012751,5.06067874 3.70167601,4.84794236 4.09924229,4.2550307 C4.49680856,3.66211904 4.66889854,2.62715251 5.37748055,1.96669907 C6.08606256,1.30624564 8.28660319,0.0488102071 9.69211234,0.0488102071 C11.0976215,0.0488102071 12.8680999,1.96669907 13.3397912,1.96669907 C13.8114825,1.96669907 15.1747055,0.0488102071 17.1223828,0.0488102071 C19.0700601,0.0488102071 20.8068103,0.319467656 22.05425,1.96669907 C22.8858765,3.06485335 23.4985214,4.50304835 23.8921848,6.28128405 C25.283263,6.86569984 26.1690895,7.63144484 26.5496643,8.57851906 C27.1205265,9.9991304 27.1205265,13.2082493 27.1205265,14.7701127 C27.1205265,16.3319761 26.6407808,22.0788574 25.6123226,23.8478255 C24.9266838,25.0271377 24.3533045,26.8208112 23.8921848,29.2288461 L23.8921848,36.9286614 L3.5012751,37.1505056 Z" id="Path-4"></path>
                                        <path d="M5.5,18 C6.96805436,17.9450124 7.81907646,16.0613151 7.81907646,14.1283184 C7.81907646,12.1953218 6.88071187,11 5.5,11 C4.11928813,11 3,12.5670034 3,14.5 C3,15.2322763 3.58321231,15.9313331 4.07434436,16.6124224 C4.6047608,17.3479903 5.06116989,18.036893 5.5,18 Z" id="Oval"></path>
                                        <path d="M22.5,17 C23.9680544,16.9450124 24.8190765,15.0613151 24.8190765,13.1283184 C24.8190765,11.1953218 23.8807119,10 22.5,10 C21.1192881,10 20,11.5670034 20,13.5 C20,14.2322763 20.5832123,14.9313331 21.0743444,15.6124224 C21.6047608,16.3479903 22.0611699,17.036893 22.5,17 Z" id="Oval" transform="translate(22.409538, 13.500709) scale(-1, 1) translate(-22.409538, -13.500709) "></path>
                                        <ellipse id="Oval-2" cx="10" cy="6.5" rx="2" ry="3.5"></ellipse>
                                        <path d="M17.1328385,8.9353728 C17.9606035,8.77796535 19.2220646,7.90983944 19.4778058,6.5 C19.733547,5.09016056 19.1045695,3 18,3 C16.8954305,3 15.3767731,4.2556346 15.3767731,6.18863122 C15.3767731,8.12162784 16.3050735,9.09278024 17.1328385,8.9353728 Z" id="Oval-2-Copy"></path>
                                        <path d="M13.7525723,22.3970899 C16.1195722,22.3970899 18.1499064,20.7416569 18.1068613,19.6292174 C18.0638162,18.516778 17.2700314,15.4511969 16.6000421,14.7526157 C15.9300529,14.0540345 15.0787944,12.1910712 14.0485976,12.1910712 C13.0184008,12.1910712 10.5612226,15.3665496 10.1579453,17.2940806 C9.75466793,19.2216115 9.83667006,21.2644505 10.5612226,21.6891302 C11.2857751,22.1138098 11.3855724,22.3970899 13.7525723,22.3970899 Z" id="Path-5"></path>
                                    </g>
                                </g>
                            </g>
                        </svg>
                        Meow~
                    </button>
                </div>
                <p>Today, <span>2,789,109</span> meowed by <span>281</span> butlers.</p>
            </div>
        </div>
        <div class="images">
            <!-- Inserted images by script -->
        </div>
        <div class="more">
            <button type="button" name="more" onclick="call_giphy()">more meows...</button>
        </div>



        <script type="text/javascript">
            // giphy
            var offset = Math.floor(Math.random() * 500)
            var giphy_search = ['cat']
            var search_result = []
            var called_count = 0
            var giphy_callback = function(err, giphy_data) {
              if (err != null) {
                console.log('Something went wrong: ' + err);
              }
              else {
                 for (i=0; i<giphy_data.data.length; i++) {
                     var image_div = document.createElement( 'div' );
                     image_div.className = 'image'
                     var img = document.createElement( 'img' );
                     image_div.appendChild( img );
                     img.className = 'imgs'
                     img.id = i
                     img.src = giphy_data.data[i].images.downsized_large.url
                     img.addEventListener('click', show_viewer, false);
                     search_result.push(giphy_data.data[i].images.original.url)

                     document.getElementsByClassName('images')[0].appendChild(image_div);
                 }
             offset = offset + 9
              }
            };
            function call_giphy() {
                getJSON('https://api.giphy.com/v1/gifs/search?q='+giphy_search[0]+'&api_key=dc6zaTOxFJmzC&limit=9&offset='+offset, giphy_callback);
                called_count = called_count + 1
            }
            call_giphy()

            // viewer
            var current_viewer_image = 0;

            function ready_to_call_check() {
                if (9 * called_count - current_viewer_image  <  3) {
                    call_giphy()
                }
            }
            function show_viewer(e) {
                document.getElementById('viewer').classList.add('on');
                document.getElementById('viewer_image').src = search_result[e.target.id]
                current_viewer_image = e.target.id
                ready_to_call_check()
            };
            function close_viewer() {
                document.getElementById('viewer').classList.remove('on');
            }
            function next_image() {
                var next_image = search_result[parseInt(current_viewer_image)+1]
                if ( !!next_image ) {
                    document.getElementById('viewer_image').src = next_image
                    current_viewer_image = parseInt(current_viewer_image) + 1
                    ready_to_call_check()
                } else {
                    call_giphy()
                    document.getElementById('viewer_image').src = next_image
                    current_viewer_image = parseInt(current_viewer_image) + 1
                    ready_to_call_check()
                }
            }
            function prev_image() {
                var prev_image = search_result[parseInt(current_viewer_image)-1]
                if ( !!prev_image ) {
                    document.getElementById('viewer_image').src = prev_image
                    current_viewer_image = parseInt(current_viewer_image) - 1
                }
            }
        </script>
    </body>
</html>
